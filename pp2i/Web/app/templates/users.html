<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Les Jardiniers</title>
    <link rel="stylesheet" href="/static/css/users.css" />
</head>

<body>
    <div>
        <div class="nav">
            {% include "navBar.html" %}

            <div id="horizontal">
                <div id="vertical">
                    {%if numero%}
                    <h2>Les jardiniers du jardin {{numero}}</h2>
                    {%else%}
                    <h2>Les jardiniers:</h2>
                    {%endif%}
                    <h3>Cliquez pour afficher un profil!</h3>
                    
                    <table class="coord">
                        
                        <tr>
                            <th>Noms</th>
                            <th>Statut {%if numero%}(dans ce jardin){%endif%}</th>
                        </tr>
                        {%for data in data%}

                        <tr class="personne"
                            onclick="afficherprofil('{{data[1]}}','{{data[2]}}','{{data[3]}}','{{data[0]}}','{{data[5]}}', '{{data[6]}}', '{{data[7]}}', '{{data[8]}}' , '{{data[9]}}')">
                            <td>{{data[2]}} {{data[1]}}</td></a>
                            <td>{{data[5]}}</td>
                        </tr>
                        {%endfor%}
                    </table>
                </div>
                
                <div id="vertical">
                    <div class="case">


                        <div id="imgprof"></div>
                        <div id="affichagepropre">
                            <div id="msgBase"></div>
                            <ul>
                                <div id="nom"></div>
                                <div id="n"></div>
                            </ul>
                            <ul>
                                <div id="prenom"></div>
                                <div id="p"></div>
                            </ul>
                            <ul>
                                <div id="mail"></div><a href="mailto:{{data[3]}}" id="m"></a>
                            </ul>
                            <ul>
                                <div id="iduser"></div>
                                <div id="i"></div>
                            </ul>
                            <ul>
                                <div id="statut"></div>
                                <div id="s"></div>
                            </ul>
                            <ul>
                                <div id="jardins"></div>
                                <div id="j"></div>
                            </ul>
                            <ul>
                                <div id="parcelles"></div>
                                <div id="pa"></div>
                            </ul>

                            <ul>
                                <div id="referent"></div>
                                <div id="re"></div>
                            </ul>

                        </div>
                    </div>
                </div>
                <script>
                    var img = document.createElement("img");
                    var pasDeClick = new Boolean(true);

                    if (pasDeClick) {
                        document.getElementById('msgBase').textContent = "Cliquez sur une case pour afficher un profil!"

                    }
                    function afficherprofil(nom, prenom, mail, iduser, statut, jardins, parcelles, chemin, referent) {

                        img.src = chemin;
                        img.style.width = "20%";
                        img.style.marginBottom = "3%";
                        document.getElementById('jardins').textContent = "";
                        document.getElementById('j').textContent="";
                        document.getElementById('parcelles').textContent = "";
                        document.getElementById('pa').textContent = "";
                        document.getElementById('referent').textContent = "";
                        document.getElementById('re').textContent = "";

                        var div = document.getElementById("imgprof");
                        div.appendChild(img);
                        document.getElementById('msgBase').textContent = "";
                        document.getElementById('prenom').textContent = "Prénom: ";
                        document.getElementById('p').textContent = prenom;
                        document.getElementById('nom').textContent = "Nom: ";
                        document.getElementById('n').textContent = nom;
                        document.getElementById('mail').textContent = "Mail: ";
                        document.getElementById('m').textContent = mail;
                        document.getElementById('iduser').textContent = "Identifiant: ";
                        document.getElementById('i').textContent = iduser;
                        document.getElementById('statut').textContent = "Statut: ";
                        document.getElementById('s').textContent = statut;
                        if (jardins.length>2){
                            if (jardins.length==3){
                                document.getElementById('jardins').textContent = "Administre le jardin: ";
                            }else{
                                document.getElementById('jardins').textContent = "Administre les jardins: ";
                            }
                            for (var i=1; i<jardins.length-1; i++ ){
                                document.getElementById('j').textContent += jardins[i];
                            }
                        }
                        if (parcelles.length>2){
                            if (parcelles.length==3){
                                document.getElementById('parcelles').textContent = "Jardine dans la parcelle: ";
                            }else{
                                document.getElementById('parcelles').textContent = "Jardine dans les parcelles: ";
                            }
                            for (var i=1; i<parcelles.length-1; i++ ){
                                document.getElementById('pa').textContent += parcelles[i];
                            }
                        }
                        if (referent.length>2){
                            if (referent.length==3){
                                document.getElementById('referent').textContent = "Référent.e du jardin: ";
                            }else{
                                document.getElementById('re').textContent = "Référent.e des jardins: ";
                            }
                            for (var i=1; i<referent.length-1; i++ ){
                                document.getElementById('re').textContent += referent[i];
                            }
                        }

                    }
                </script>
</body>

</html>